# 3장 물리계층과 데이터링크계층

## 3.1 물리계층 (Physical Layer)

### 3.1.1 물리계층의 기능
- **전기적 신호 변환**: 디지털 데이터를 물리적 신호로 변환
- **전송매체 관리**: 케이블, 무선 등 물리적 연결 관리
- **신호 동기화**: 송신자와 수신자 간 타이밍 동기화
- **비트 스트림 전송**: 개별 비트 단위의 데이터 전송

### 3.1.2 전송매체의 종류와 특성

#### 유선 전송매체
1. **동축 케이블 (Coaxial Cable)**
   - 구조: 중심 도체 + 절연체 + 외부 도체 + 외피
   - 특성: 높은 대역폭, 전자기 간섭 저항성
   - 용도: 케이블 TV, 구형 이더넷

2. **연선 (Twisted Pair)**
   - **UTP (Unshielded Twisted Pair)**
     - 카테고리: Cat 5e (100Mbps), Cat 6 (1Gbps), Cat 6A (10Gbps)
     - 거리: 최대 100m
     - 용도: 일반적인 LAN 환경
   
   - **STP (Shielded Twisted Pair)**
     - 추가 차폐막으로 전자기 간섭 방지
     - 산업용 환경에서 사용

3. **광섬유 케이블 (Fiber Optic Cable)**
   - **단일모드 (Single Mode)**
     - 코어 직경: 8-10μm
     - 전송거리: 수십 km
     - 용도: 장거리 백본 네트워크
   
   - **다중모드 (Multi Mode)**
     - 코어 직경: 50-62.5μm
     - 전송거리: 수백 m
     - 용도: 건물 내 백본

#### 무선 전송매체
1. **라디오파**
   - 주파수: 3kHz ~ 300GHz
   - 특성: 장거리 전송, 장애물 투과

2. **마이크로파**
   - 주파수: 300MHz ~ 300GHz
   - 특성: 직진성, 고속 전송

3. **적외선**
   - 주파수: 300GHz ~ 400THz
   - 특성: 단거리, 보안성 우수

### 3.1.3 신호 인코딩 기법

#### 디지털 신호 인코딩
1. **NRZ (Non-Return to Zero)**
   - NRZ-L: 1은 양전압, 0은 음전압
   - NRZ-I: 비트 경계에서 신호 변화로 1 표현

2. **Manchester Encoding**
   - 각 비트 주기의 중간에서 신호 전이
   - 1: 상승 전이, 0: 하강 전이
   - 자가 동기화 특성

3. **Differential Manchester**
   - 비트 시작에서 전이 유무로 구분
   - 전이 없음: 1, 전이 있음: 0

#### 아날로그 신호 인코딩
1. **ASK (Amplitude Shift Keying)**
   - 진폭 변조로 디지털 데이터 전송

2. **FSK (Frequency Shift Keying)**
   - 주파수 변조로 디지털 데이터 전송

3. **PSK (Phase Shift Keying)**
   - 위상 변조로 디지털 데이터 전송

## 3.2 데이터링크계층 (Data Link Layer)

### 3.2.1 데이터링크계층의 기능

#### 프레이밍 (Framing)
- **목적**: 비트 스트림을 프레임 단위로 구분
- **방법**:
  - 문자 기반: STX/ETX 사용
  - 비트 기반: 플래그 시퀀스 사용
  - 길이 기반: 헤더에 길이 정보 포함

#### 오류 제어 (Error Control)
1. **오류 검출 기법**
   - **패리티 비트**: 홀수/짝수 패리티
   - **체크섬**: 데이터 합계 검증
   - **CRC (Cyclic Redundancy Check)**: 다항식 기반 검사

2. **오류 정정 기법**
   - **해밍 코드**: 단일 비트 오류 정정
   - **Reed-Solomon**: 버스트 오류 정정

#### 흐름 제어 (Flow Control)
1. **Stop-and-Wait**
   - 한 번에 하나의 프레임만 전송
   - ACK 수신 후 다음 프레임 전송

2. **Sliding Window**
   - 여러 프레임을 연속 전송
   - 윈도우 크기만큼 ACK 없이 전송 가능

### 3.2.2 이더넷 표준 및 프레임 구조

#### 이더넷 발전사
- **1973년**: Xerox에서 최초 개발
- **1980년**: DIX 표준 (Digital, Intel, Xerox)
- **1985년**: IEEE 802.3 표준화
- **현재**: Gigabit/10Gigabit 이더넷까지 발전

#### 이더넷 프레임 구조

```
+----------+----------+----------+----------+----------+----------+----------+
| Preamble | SFD      | DA       | SA       | Length/  | Data     | FCS      |
| (7bytes) | (1byte)  | (6bytes) | (6bytes) | Type     | (46-1500)| (4bytes) |
|          |          |          |          | (2bytes) |          |          |
+----------+----------+----------+----------+----------+----------+----------+
```

- **Preamble**: 동기화를 위한 7바이트
- **SFD (Start Frame Delimiter)**: 프레임 시작 구분자
- **DA (Destination Address)**: 목적지 MAC 주소
- **SA (Source Address)**: 송신지 MAC 주소
- **Length/Type**: 데이터 길이 또는 프로토콜 타입
- **Data**: 실제 전송 데이터 (46-1500바이트)
- **FCS (Frame Check Sequence)**: CRC 오류 검사

#### 이더넷 표준 분류

| 표준 | 속도 | 매체 | 거리 | 특징 |
|------|------|------|------|------|
| 10BASE-T | 10Mbps | UTP | 100m | 트위스트 페어 |
| 100BASE-TX | 100Mbps | UTP | 100m | 패스트 이더넷 |
| 1000BASE-T | 1Gbps | UTP | 100m | 기가비트 이더넷 |
| 10GBASE-T | 10Gbps | UTP | 100m | 10기가비트 이더넷 |
| 1000BASE-SX | 1Gbps | 다중모드 광섬유 | 550m | 단파장 레이저 |
| 1000BASE-LX | 1Gbps | 단일모드 광섬유 | 5km | 장파장 레이저 |

### 3.2.3 CSMA/CD 접근 방법

#### CSMA/CD 동작 원리
1. **CS (Carrier Sense)**: 매체 사용 여부 감지
2. **MA (Multiple Access)**: 다중 접근 허용
3. **CD (Collision Detection)**: 충돌 검출

#### 충돌 처리 과정
1. **충돌 감지**: 신호 레벨 모니터링
2. **잼 신호 전송**: 모든 스테이션에 충돌 알림
3. **백오프 알고리즘**: 지수 백오프로 재전송 시간 결정
4. **재전송**: 임의 시간 후 재전송 시도

#### 슬롯 타임과 최소 프레임 크기
- **슬롯 타임**: 충돌 검출 최대 시간 (512 비트 타임)
- **최소 프레임**: 64바이트 (512비트)
- **최대 네트워크 지름**: 슬롯 타임의 절반

## 3.3 스위칭 기술

### 3.3.1 회선 교환 (Circuit Switching)

#### 특징
- **전용 경로**: 통신 전 경로 설정
- **고정 대역폭**: 일정한 전송률 보장
- **낮은 지연**: 경로 설정 후 즉시 전송
- **높은 비용**: 자원 독점 사용

#### 동작 과정
1. **경로 설정**: Call Setup
2. **데이터 전송**: Data Transfer
3. **경로 해제**: Call Teardown

#### 응용 분야
- 음성 통신 (PSTN)
- 실시간 통신
- 고품질 서비스

### 3.3.2 패킷 교환 (Packet Switching)

#### 데이터그램 방식
- **특징**: 각 패킷이 독립적으로 라우팅
- **장점**: 유연성, 내결함성
- **단점**: 순서 보장 없음, 지연 변동

#### 가상 회선 방식
- **특징**: 논리적 연결 설정 후 통신
- **장점**: 순서 보장, 예측 가능한 성능
- **단점**: 설정 오버헤드, 라우터 상태 정보 필요

#### 패킷 교환의 장단점
**장점**:
- 효율적인 대역폭 사용
- 다양한 트래픽 지원
- 경제적인 구현

**단점**:
- 가변적인 지연
- 큐잉 지연 발생
- 패킷 손실 가능

### 3.3.3 메시지 교환 (Message Switching)

#### 저장-전달 방식
- **동작**: 전체 메시지를 수신 후 다음 노드로 전달
- **특징**: 완전한 메시지 단위 처리
- **용도**: 이메일, 배치 처리

#### 장단점
**장점**:
- 오류 복구 용이
- 네트워크 효율성
- 우선순위 처리

**단점**:
- 긴 지연 시간
- 대용량 저장공간 필요
- 실시간 통신 부적합

## 3.4 MAC 주소와 ARP

### 3.4.1 MAC 주소 구조

#### MAC 주소 형식
- **길이**: 48비트 (6바이트)
- **표현**: XX:XX:XX:XX:XX:XX (16진수)
- **구성**: OUI (24비트) + NIC (24비트)

#### OUI (Organizationally Unique Identifier)
- IEEE에서 할당하는 제조업체 식별자
- 앞 24비트로 제조업체 구분

#### 특수 MAC 주소
- **브로드캐스트**: FF:FF:FF:FF:FF:FF
- **멀티캐스트**: 첫 번째 비트가 1
- **유니캐스트**: 첫 번째 비트가 0

### 3.4.2 ARP (Address Resolution Protocol)

#### ARP의 필요성
- IP 주소를 MAC 주소로 변환
- 동일 네트워크 내 통신을 위해 필수

#### ARP 동작 과정
1. **ARP Request**: 브로드캐스트로 MAC 주소 요청
2. **ARP Reply**: 해당 IP의 호스트가 MAC 주소 응답
3. **ARP Table**: IP-MAC 매핑 정보 캐시

#### ARP 패킷 구조
```
+----------+----------+----------+----------+
| Hardware | Protocol | HLEN     | PLEN     |
| Type     | Type     |          |          |
+----------+----------+----------+----------+
| Operation| Sender   | Sender   | Target   |
|          | HW Addr  | Proto    | HW Addr  |
|          |          | Addr     |          |
+----------+----------+----------+----------+
```

## 3.5 연습문제

### 객관식 문제

1. 이더넷 프레임의 최소 크기는?
   a) 46바이트  b) 64바이트  c) 72바이트  d) 1518바이트

2. CSMA/CD에서 충돌 검출 시간과 관련된 개념은?
   a) 프레임 간격  b) 슬롯 타임  c) 백오프 타임  d) 프로파게이션 딜레이

3. MAC 주소의 길이는?
   a) 32비트  b) 48비트  c) 64비트  d) 128비트

### 서술형 문제

1. 회선 교환과 패킷 교환의 차이점을 설명하고, 각각의 장단점을 비교하시오.

2. CSMA/CD의 동작 과정을 단계별로 설명하고, 충돌 해결 메커니즘을 기술하시오.

3. ARP의 동작 원리를 설명하고, ARP 테이블의 역할과 관리 방법을 기술하시오.

### 실습 문제

1. Wireshark를 사용하여 이더넷 프레임 구조를 분석하고, 각 필드의 역할을 설명하시오.

2. ARP 테이블을 조회하고 ARP 캐시의 변화를 관찰하는 실습을 수행하시오.

---

**다음 장 예고**: 4장에서는 네트워크 계층의 IP 프로토콜과 라우팅의 기본 개념을 학습합니다.

#물리계층 #데이터링크계층 #이더넷 #CSMA_CD #MAC주소 #ARP
